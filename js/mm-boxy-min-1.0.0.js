/*! 
massM Boxy v1.0.0 | (c) 2013 massM | bymassm.com
*/
(function(b){MMBoxy=function(c){return new MMBoxy.object.initObj(c)};MMBoxy.object={self:this,defaultOptions:{content:"",onClose:function(){},onYes:null,onNo:null,onCancel:null,buttonYes:"Yes",buttonNo:"No",buttonCancel:"Cancel",outsideClose:true,title:"Boxy Title",type:"YesNoCancel",effect:"FadeNScale"},effects:{FadeNScale:"mm-effect-1",SlideFromRight:"mm-effect-2",SlideFromBottom:"mm-effect-3",Newspaper:"mm-effect-4",FlipHorizontal:"mm-effect-5",FlipVertical:"mm-effect-6",Sign:"mm-effect-7",Slit:"mm-effect-8",SuperScale:"mm-effect-9",SlideFall:"mm-effect-10"},id:0,boxy:null,overlay:null,options:null,initObj:function(d){var f=this;this.id=a.createUUID();this.options=d?d:this.defaultOptions;for(var e in this.defaultOptions){if(this.defaultOptions.hasOwnProperty(e)&&!this.options.hasOwnProperty(e)){this.options[e]=this.defaultOptions[e]}}this.boxyTemplate='<div id="mm-boxy-'+this.id+'" class="mm-boxy '+this.effects[this.options.effect]+'">';this.boxyTemplate+='<div class="mm-boxy-wrapper">                                        <h3 class="mm-boxy-title">'+this.options.title+'</h3>                                        <div class="mm-boxy-content">'+this.options.content+"</div>";if(this.options.type!="NoButton"){this.boxyTemplate+='<div class="mm-boxy-bottom">';switch(this.options.type){case"YesNoCancel":this.boxyTemplate+='<button class="mm-boxy-button" id="mm-boxy-yes-'+this.id+'">'+this.options.buttonYes+"</button>";this.boxyTemplate+='<button class="mm-boxy-button" id="mm-boxy-no-'+this.id+'">'+this.options.buttonNo+"</button>";this.boxyTemplate+='<button class="mm-boxy-button" id="mm-boxy-cancel-'+this.id+'">'+this.options.buttonCancel+"</button>";break;case"YesNo":this.boxyTemplate+='<button class="mm-boxy-button" id="mm-boxy-yes-'+this.id+'">'+this.options.buttonYes+"</button>";this.boxyTemplate+='<button class="mm-boxy-button" id="mm-boxy-no-'+this.id+'">'+this.options.buttonNo+"</button>";break;case"Yes":this.boxyTemplate+='<button class="mm-boxy-button" id="mm-boxy-yes-'+this.id+'">'+this.options.buttonYes+"</button>";break}this.boxyTemplate+="</div>"}if(this.options.closeButton==true){this.boxyTemplate+='<a close="'+this.id+'" class="mm-boxy-close mm-boxy-close-png" style="display: inline;"></a>'}this.boxyTemplate+="</div>";if(document.querySelector(".mm-boxy-overlay")){a.remove(document.querySelector(".mm-boxy-overlay"))}this.boxyTemplate+='</div><div id="mm-boxy-overlay-'+this.id+'" class="mm-boxy-overlay'+(this.ie6?"-ie":"")+'"></div>';a.apppendHtml(document.querySelector("body"),this.boxyTemplate);this.boxy=document.querySelector("#mm-boxy-"+this.id);this.overlay=document.querySelector(".mm-boxy-overlay");this.overlay.addEventListener("click",function(){f.hide()});var g=document.querySelector("#mm-boxy-yes-"+this.id);if(g){if(!this.options.onYes){this.options.onYes=function(){f.hide()}}g.addEventListener("click",function(i){f.options.onYes()})}var c=document.querySelector("#mm-boxy-no-"+this.id);if(c){if(!this.options.onNo){this.options.onNo=function(){f.hide()}}c.addEventListener("click",function(i){f.options.onNo()})}var h=document.querySelector("#mm-boxy-cancel-"+this.id);if(h){if(!this.options.onCancel){this.options.onCancel=function(){f.hide()}}h.addEventListener("click",function(i){f.options.onCancel()})}return this},show:function(){var c=this;setTimeout(function(){a.addClass(c.boxy,"mm-show")},0)},hide:function(){var c=this;setTimeout(function(){[].slice.call(document.querySelectorAll(".mm-boxy")).forEach(function(e,d){a.removeClass(e,"mm-show")});c.options.onClose()},0)}};MMBoxy.object.initObj.prototype=MMBoxy.object;var a=function(){};a={propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},createUUID:function(){var c=new Date().getTime();c+="_"+Math.round(Math.random()*10000000)+"_"+Math.round(Math.random()*10000000);return c},apppendHtml:function(f,c){var d=false;if(c.indexOf("<tr")>=0||c.indexOf("</tr>")>=0){var g=document.createElement("table");d=true}else{var g=document.createElement("div")}g.innerHTML=c;if(d==true){f.appendChild(g.firstChild)}else{while(g.firstChild){f.appendChild(g.firstChild)}}},removeClass:function(f,c){var d=a.getAttr(f,"class");if(d==c){a.removeAttr(f,"class")}else{if(a.hasClass(f,c)){d=d.replace(" "+c+" "," ");d=d.replace(c+" ","");d=d.replace(" "+c,"");a.setAttr(f,"class",d)}}},addClass:function(f,d){if(!a.hasClass(f,d)){var c=a.getAttr(f,"class");if(c&&typeof c=="string"){a.setAttr(f,"class",c+" "+d)}else{a.setAttr(f,"class",d)}}},hasClass:function(f,c){var d=a.getAttr(f,"class");if(typeof d=="string"){if((d==c)||(d.indexOf(" "+c+" ")>=0)||(d.indexOf(" "+c)>=0)||(d.indexOf(c+" ")>=0)){return true}}return false},getAttr:function(d,c){propName=a.propFix[c]||c;return d.getAttribute(c)},removeAttr:function(d,c){propName=a.propFix[c]||c;if(rboolean.test(c)){d[propName]=false}else{a.setAttr(d,c,"")}d.removeAttribute(supports.getSetAttributes?c:propName)},setAttr:function(f,c,d){propName=a.propFix[c]||c;f.setAttribute(c,d)},remove:function(c){c.parentNode.removeChild(c);return null}}})(window);